#This will clone the repo and edit the config. file to install the required tools


if [ ! -d "ptf/" ]; then
  git clone https://github.com/trustedsec/ptf.git
fi
echo "-------->>Clone Complete<<--------"

echo "-------->>Editing Config File<<--------"
sed -i 's+INCLUDE_ONLY_THESE_MODULES=""+INCLUDE_ONLY_THESE_MODULES="modules/exploitation/impacket,modules/exploitation/kerberoast,modules/exploitation/kerbrute,modules/exploitation/mitm6,modules/exploitation/nosqlmap,modules/exploitation/responder,modules/exploitation/sqlmap,modules/intelligence-gathering/dnsenum,modules/intelligence-gathering/dnsrecon,modules/intelligence-gathering/enum4linux,modules/intelligence-gathering/gobuster,modules/intelligence-gathering/ldapdomaindump,modules/intelligence-gathering/linux-exploit-suggester,modules/intelligence-gathering/linuxprivchecker,modules/intelligence-gathering/msfenum,modules/intelligence-gathering/ntlmrecon,modules/intelligence-gathering/nulllinux,modules/intelligence-gathering/smbmap,modules/intelligence-gathering/smtp-user-enum,modules/intelligence-gathering/spiderfoot,modules/intelligence-gathering/ssh-audit,modules/intelligence-gathering/sublist3r,modules/intelligence-gathering/windows-exploit-suggester,modules/password-recovery/hashcat,modules/password-recovery/seclist,modules/post-exploitation/bloodhound,modules/post-exploitation/crackmapexec,modules/post-exploitation/empire,modules/post-exploitation/evilwinrm,modules/post-exploitation/privexchange,modules/powershell/nishang,modules/powershell/powersploit,modules/vulnerability-analysis/rdpscan"+g' ptf/config/ptf.config
sed -i 's+AUTO_UPDATE="ON"+AUTO_UPDATE="OFF"+g' ptf/config/ptf.config

cd ptf/
pip install -r requirements.txt
./ptf << EOF
yes
yes
yes
yes
yes
EOF
